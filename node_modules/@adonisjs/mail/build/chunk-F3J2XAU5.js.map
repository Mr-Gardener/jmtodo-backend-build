{"version":3,"sources":["../src/transports/json.ts"],"sourcesContent":["/*\n * @adonisjs/mail\n *\n * (c) AdonisJS\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nimport { createTransport } from 'nodemailer'\nimport type NodeMailerTransport from 'nodemailer/lib/json-transport/index.js'\n\nimport { MailResponse } from '../mail_response.js'\nimport type { MailTransportContract, NodeMailerMessage } from '../types.js'\n\n/**\n * JSON transport returns the mail message as a JSON object\n */\nexport class JSONTransport implements MailTransportContract {\n  #transporter = createTransport({ jsonTransport: true })\n\n  /**\n   * Send message\n   */\n  async send(\n    message: NodeMailerMessage\n  ): Promise<MailResponse<NodeMailerTransport.SentMessageInfo>> {\n    const jsonResponse = await this.#transporter.sendMail(message)\n\n    return new MailResponse(jsonResponse.messageId, jsonResponse.envelope, jsonResponse)\n  }\n}\n"],"mappings":";;;;;;;;AASA,SAASA,uBAAuB;AASzB,IAAMC,gBAAN,MAAMA;EAlBb,OAkBaA;;;EACX,eAAeC,gBAAgB;IAAEC,eAAe;EAAK,CAAA;;;;EAKrD,MAAMC,KACJC,SAC4D;AAC5D,UAAMC,eAAe,MAAM,KAAK,aAAaC,SAASF,OAAAA;AAEtD,WAAO,IAAIG,aAAaF,aAAaG,WAAWH,aAAaI,UAAUJ,YAAAA;EACzE;AACF;","names":["createTransport","JSONTransport","createTransport","jsonTransport","send","message","jsonResponse","sendMail","MailResponse","messageId","envelope"]}